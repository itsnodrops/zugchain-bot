(function(_0x5702fd,_0x504370){const _0x449db5=a0_0x5f5a,_0x11bf24=_0x5702fd();while(!![]){try{const _0x5a73a1=-parseInt(_0x449db5(0xcf))/0x1*(-parseInt(_0x449db5(0xef))/0x2)+-parseInt(_0x449db5(0xe8))/0x3+-parseInt(_0x449db5(0xf8))/0x4+-parseInt(_0x449db5(0xfe))/0x5+parseInt(_0x449db5(0x101))/0x6+parseInt(_0x449db5(0x100))/0x7+parseInt(_0x449db5(0xc8))/0x8;if(_0x5a73a1===_0x504370)break;else _0x11bf24['push'](_0x11bf24['shift']());}catch(_0xd98d53){_0x11bf24['push'](_0x11bf24['shift']());}}}(a0_0x400b,0x6f128));const a0_0x28d83=(function(){let _0x50ba5d=!![];return function(_0x92ee98,_0x1fe93b){const _0x241eb6=_0x50ba5d?function(){const _0x22650a=a0_0x5f5a;if(_0x1fe93b){const _0x3b2833=_0x1fe93b[_0x22650a(0xd1)](_0x92ee98,arguments);return _0x1fe93b=null,_0x3b2833;}}:function(){};return _0x50ba5d=![],_0x241eb6;};}());(function(){a0_0x28d83(this,function(){const _0x3b6723=a0_0x5f5a,_0xb91e9b=new RegExp('function\x20*\x5c(\x20*\x5c)'),_0x1ead70=new RegExp(_0x3b6723(0xd9),'i'),_0x3b3745=a0_0x5708e6('init');!_0xb91e9b['test'](_0x3b3745+_0x3b6723(0xd0))||!_0x1ead70[_0x3b6723(0xf6)](_0x3b3745+_0x3b6723(0xf4))?_0x3b3745('0'):a0_0x5708e6();})();}());import{ethers}from'ethers';import{CONTRACTS,STAKE_ABI,GAS_LIMITS,NETWORK,getGasPrice,hasEnoughGas,estimateGasLimit}from'../core/network.js';function a0_0x5f5a(_0x362492,_0x215465){_0x362492=_0x362492-0xc1;const _0x3c49df=a0_0x400b();let _0x5708e6=_0x3c49df[_0x362492];return _0x5708e6;}function a0_0x400b(){const _0x36bc18=['Stake\x20incentive\x20synced','\x20transaction(s):\x20','\x20ZUG\x20minimum)','input','length','test','\x20transaction(s)','2744232RvkGVe','provider','floor','Stake\x20failed:\x20','Cannot\x20create\x20valid\x20stake\x20amounts','insufficient_balance','464845eFOMow','counter','359723JhZYxP','4940076DGUBWI','\x20ZUG\x20in\x20','getBalance','stake','debu','STAKE','warn','join','Incentive\x20sync\x20failed:\x20','\x20ZUG,\x20will\x20stake:\x20','3484872igcNix','Balance:\x20','address','blockNumber','constructor','string','\x20ZUG','5AOczKj','chain','apply','reduce','filter','txHash','\x20ZUG...','all_failed','Skipping\x20stake\x20of\x20','Stake\x20failed,\x20stopping\x20remaining\x20stakes','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','gger','status','wait','parseEther','Transaction\x20reverted','info','toFixed','Contract','push','message','syncIncentive','while\x20(true)\x20{}','random','\x20ZUG\x20-\x20Block:\x20','756465OmAtbT','\x20ZUG\x20(below\x20','call','success','error','Splitting\x20into\x20','map','70316VwgEdr','formatEther'];a0_0x400b=function(){return _0x36bc18;};return a0_0x400b();}import{createApiClient}from'../core/api.js';import{sleep}from'../utils/helper.js';const RESERVE_BALANCE=0.5,MIN_STAKE_AMOUNT=0x1;function distributeStakeAmounts(_0x5d1919,_0x3990c5){const _0x2687e2=a0_0x5f5a,_0x48c51e=Math['floor'](_0x5d1919/MIN_STAKE_AMOUNT);if(_0x48c51e<=0x0)return[];if(_0x48c51e===0x1)return[Math[_0x2687e2(0xfa)](_0x5d1919*0x64)/0x64];const _0x46ea48=Math['min'](_0x3990c5,_0x48c51e);if(_0x46ea48===0x1)return[Math[_0x2687e2(0xfa)](_0x5d1919*0x64)/0x64];const _0x133ee3=MIN_STAKE_AMOUNT,_0x474db1=_0x5d1919-_0x133ee3*_0x46ea48,_0x6bd046=[];for(let _0x5884c2=0x0;_0x5884c2<_0x46ea48;_0x5884c2++){_0x6bd046[_0x2687e2(0xe2)](Math[_0x2687e2(0xe6)]());}const _0x1e1560=_0x6bd046[_0x2687e2(0xd2)]((_0x1cc2dd,_0x53a287)=>_0x1cc2dd+_0x53a287,0x0),_0x552b9d=_0x6bd046[_0x2687e2(0xee)](_0x37313f=>{const _0x23222b=_0x37313f/_0x1e1560*_0x474db1,_0x240e7f=_0x133ee3+_0x23222b;return Math['floor'](_0x240e7f*0x64)/0x64;});return _0x552b9d;}async function singleStake(_0x3e727e,_0x3b2aef,_0x586fd1,_0x59b80d,_0x59833d){const _0x1b07db=a0_0x5f5a,_0x290b06=_0x3e727e[_0x1b07db(0xca)],_0x1dbbb1=ethers[_0x1b07db(0xdd)](String(_0x3b2aef));try{const _0x4b969f=new ethers[(_0x1b07db(0xe1))](CONTRACTS[_0x1b07db(0xc3)],STAKE_ABI,_0x3e727e),_0x3e60b9=await getGasPrice(_0x3e727e[_0x1b07db(0xf9)]),_0x18f83e=await estimateGasLimit(_0x3e727e,_0x4b969f,_0x1b07db(0xc1),[_0x586fd1,_0x59b80d],_0x1dbbb1);_0x59833d[_0x1b07db(0xdf)]('Staking\x20'+_0x3b2aef+_0x1b07db(0xd5));const _0xf608e2=await _0x4b969f[_0x1b07db(0xc1)](_0x586fd1,_0x59b80d,{'value':_0x1dbbb1,'gasLimit':_0x18f83e,'maxFeePerGas':_0x3e60b9,'maxPriorityFeePerGas':_0x3e60b9/0xan}),_0x2e9024=await _0xf608e2[_0x1b07db(0xdc)]();if(_0x2e9024[_0x1b07db(0xdb)]===0x0)throw new Error(_0x1b07db(0xde));return _0x59833d[_0x1b07db(0xeb)]('Staked\x20'+_0x3b2aef+_0x1b07db(0xe7)+_0x2e9024[_0x1b07db(0xcb)]),{'success':!![],'txHash':_0xf608e2['hash'],'amount':_0x3b2aef};}catch(_0x1ad1e7){return _0x59833d[_0x1b07db(0xec)](_0x1b07db(0xfb)+_0x1ad1e7['message']),{'success':![],'error':_0x1ad1e7[_0x1b07db(0xe3)]};}}export async function performStake(_0x64e3de,_0x31be65,_0x3f4c66=0x0,_0x180aae=!![],_0xe08dc4){const _0x46958d=a0_0x5f5a,_0xfa8e89=_0x64e3de[_0x46958d(0xca)],_0x528426=await _0x64e3de[_0x46958d(0xf9)][_0x46958d(0x103)](_0xfa8e89),_0x3315d9=parseFloat(ethers[_0x46958d(0xf0)](_0x528426)),_0x1c4831=_0x3315d9-RESERVE_BALANCE;_0xe08dc4[_0x46958d(0xdf)](_0x46958d(0xc9)+_0x3315d9[_0x46958d(0xe0)](0x2)+_0x46958d(0xc7)+_0x1c4831[_0x46958d(0xe0)](0x2)+'\x20ZUG');if(_0x1c4831<MIN_STAKE_AMOUNT)return _0xe08dc4[_0x46958d(0xc4)]('Insufficient\x20balance\x20for\x20staking\x20(need\x20'+(MIN_STAKE_AMOUNT+RESERVE_BALANCE)+_0x46958d(0xf3)),{'success':![],'reason':_0x46958d(0xfd),'totalStaked':0x0,'txHashes':[]};const _0x1055a2=Math[_0x46958d(0xfa)](Math[_0x46958d(0xe6)]()*0x5)+0x1,_0x422f4e=distributeStakeAmounts(_0x1c4831,_0x1055a2);if(_0x422f4e['length']===0x0)return _0xe08dc4[_0x46958d(0xc4)](_0x46958d(0xfc)),{'success':![],'reason':'insufficient_balance','totalStaked':0x0,'txHashes':[]};_0xe08dc4[_0x46958d(0xdf)](_0x46958d(0xed)+_0x422f4e['length']+_0x46958d(0xf2)+_0x422f4e[_0x46958d(0xee)](_0x3b8cb4=>_0x3b8cb4[_0x46958d(0xe0)](0x2))[_0x46958d(0xc5)](',\x20')+_0x46958d(0xce));const _0x302798=[];let _0x208e41=0x0;for(let _0x2da15c=0x0;_0x2da15c<_0x422f4e[_0x46958d(0xf5)];_0x2da15c++){const _0x471358=_0x422f4e[_0x2da15c];if(_0x471358<MIN_STAKE_AMOUNT){_0xe08dc4[_0x46958d(0xc4)](_0x46958d(0xd7)+_0x471358[_0x46958d(0xe0)](0x2)+_0x46958d(0xe9)+MIN_STAKE_AMOUNT+_0x46958d(0xf3));continue;}const _0x41a742=await singleStake(_0x64e3de,_0x471358,_0x3f4c66,_0x180aae,_0xe08dc4);_0x302798[_0x46958d(0xe2)](_0x41a742);if(_0x41a742[_0x46958d(0xeb)])_0x208e41+=_0x471358;else{_0xe08dc4['warn'](_0x46958d(0xd8));break;}_0x2da15c<_0x422f4e[_0x46958d(0xf5)]-0x1&&await sleep(0x7d0);}const _0x250133=_0x302798['filter'](_0x467c11=>_0x467c11['success'])[_0x46958d(0xf5)],_0xc36b1a=_0x302798[_0x46958d(0xd3)](_0x5bdffc=>_0x5bdffc[_0x46958d(0xeb)])['map'](_0x2ce47a=>_0x2ce47a[_0x46958d(0xd4)]);if(_0x250133>0x0)return _0xe08dc4[_0x46958d(0xeb)]('Staked\x20'+_0x208e41[_0x46958d(0xe0)](0x2)+_0x46958d(0x102)+_0x250133+_0x46958d(0xf7)),{'success':!![],'txHash':_0xc36b1a[0x0],'txHashes':_0xc36b1a,'totalStaked':_0x208e41,'stakeCount':_0x250133};return{'success':![],'reason':_0x46958d(0xd6),'totalStaked':0x0,'txHashes':[]};}export async function syncStakeIncentive(_0x27478,_0x141b3a,_0x49e83b,_0x49f465){const _0x4712d8=a0_0x5f5a;try{const _0x5f5ae1=createApiClient(_0x49e83b,'',_0x27478),_0x57b465=await _0x5f5ae1[_0x4712d8(0xe4)](_0x27478,_0x141b3a);if(_0x57b465)return _0x49f465[_0x4712d8(0xeb)](_0x4712d8(0xf1)),{'success':!![],'result':_0x57b465};return{'success':![],'reason':'empty_response'};}catch(_0x3737ef){return _0x49f465[_0x4712d8(0xec)](_0x4712d8(0xc6)+_0x3737ef[_0x4712d8(0xe3)]),{'success':![],'error':_0x3737ef['message']};}}function a0_0x5708e6(_0x4eaaba){function _0x3d6918(_0x8495b9){const _0x257bf6=a0_0x5f5a;if(typeof _0x8495b9===_0x257bf6(0xcd))return function(_0x5778a7){}[_0x257bf6(0xcc)](_0x257bf6(0xe5))[_0x257bf6(0xd1)](_0x257bf6(0xff));else(''+_0x8495b9/_0x8495b9)[_0x257bf6(0xf5)]!==0x1||_0x8495b9%0x14===0x0?function(){return!![];}[_0x257bf6(0xcc)](_0x257bf6(0xc2)+_0x257bf6(0xda))[_0x257bf6(0xea)]('action'):function(){return![];}[_0x257bf6(0xcc)](_0x257bf6(0xc2)+_0x257bf6(0xda))[_0x257bf6(0xd1)]('stateObject');_0x3d6918(++_0x8495b9);}try{if(_0x4eaaba)return _0x3d6918;else _0x3d6918(0x0);}catch(_0x1cbd43){}}